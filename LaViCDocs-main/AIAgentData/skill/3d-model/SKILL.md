---
name: 3d-model
description: "3D 模型来源、质量门槛与坐标修正规则"
---
# 3D 建模

## Overview
定义 3D 模型来源、质量要求与 Y-Up 坐标修正流程。

## 操作指南 / 工作流程
## 1. 来源与质量
- 来源：Rodin (AI 生成) / Blender / 现有库
- 格式：GLB
- 命名：`{ModelName}_AI_Rodin.glb`
- 质量要求：整体细节层级与可读性需达到可用标准
- 禁止项：几何占位、简单方块堆叠、缺失关键结构的低保真模型

## 2. 资产标准化处理 (Y-Up)
必须对 3D 模型进行几何修正，确保在 LaViC 场景 (Y-Up 坐标系) 中姿态正确。
- 修正逻辑（必须按顺序执行）：
  1. 绕 X 轴旋转 -90°（Z-Up → Y-Up）
  2. 绕 Y 轴旋转 180°（朝向修正）
- 结果验证：模型正立，机头/车头朝向正确
- 实现方式：
  - Python：`trimesh`（参考 `src/fix_glb_rotation.py`）
  - Blender：`bpy` 脚本
- 禁止项：GLB 几何仅为少量立方体/长方体拼接且无法辨识机型

## 3. 3D 不可见排查与修复
- 修复顺序：
  1. 几何体过多 → 合并为单一网格
  2. 模型位置偏移 → 包围盒中心移到原点
  3. 模型未贴地 → 最低点 Z=0
  4. 朝向不符合约定 → 按坐标修正规则修复
  5. 资源引用不一致 → 修复 agent.json 路径
  6. 军标/缩略图混用 → 修复 `modelUrlSymbols` 与 `thumbnail`

## 4. 模型真实性校验
- 参考对照：1–2 张真实参考图或高质量渲染图
- 形变检查：机头、机翼、尾喷等关键部位无明显扭曲
- 不合格返工：重生成 GLB 或更换高质量源模型

## 5. 质量基准与拒收条件
- 结构完整性：具备机身、主翼、尾翼、发动机/起落架等核心结构
- 细节复杂度：多个子网格或明显结构分区，非单一几何体
- 一致性校验：外形轮廓与缩略图保持一致
- 拒收条件：低多边形占位、方块堆叠、结构不可辨识、材质缺失或纯色占位

## Resources
- scripts/fix_glb_rotation.py
- scripts/process_glbs.py
- scripts/rotate_glbs_z180.py
